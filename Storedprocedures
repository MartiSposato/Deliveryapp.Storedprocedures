DELIMITER $$

CREATE PROCEDURE `sp_ordenar_por_nombre` (IN nombre varchar(100))

BEGIN

IF nombre <> '' THEN
SET @sql_order = nombre;
ELSE
SET  @sql_order = 'rider_id';
END IF;

SELECT @sql_order;

SET @clausula = Concat('SELECT * from riders
ORDER BY ', @sql_order);

SELECT * from riders
ORDER BY @sql_order;

PREPARE ejecutar_query FROM @clausula;
EXECUTE ejecutar_query;
DEALLOCATE PREPARE ejecutar_query;

END $$

DELIMITER ;

CALL `sp_ordenar_por_nombre` ('Nombre');

DELIMITER $$
CREATE PROCEDURE `sp_insert_nueva_ciudad`(IN p_char_insert char (50))
BEGIN
    SET @Expresion = 'select "Error: No se pudo crear la ciudad indicada";' ;
    
    SET @data_min = lower(p_char_insert);
	
	IF @data_min != '' THEN
		INSERT INTO cities
        VALUES (@data_min, null);
        
        SELECT *
        FROM cities
        WHERE ciudad LIKE @data_min;
        
	ELSE
		SELECT 'Error: No se pudo crear el producto indicado' AS 'Error' FROM DUAL;
        PREPARE nueva_ciudad FROM @Expresion;
        EXECUTE nueva_ciudad;
        DEALLOCATE PREPARE nueva_ciudad;
    END IF;
	
END$$
DELIMITER ;
